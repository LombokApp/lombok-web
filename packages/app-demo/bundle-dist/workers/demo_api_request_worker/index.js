// @bun
var I=async function(w,{serverClient:H,dbClient:B,actor:A}){if(console.log("DEMO API REQUEST WORKER REQUEST HANDLER:",new URL(w.url).pathname),A?.actorType==="system")console.log("System request");else if(A?.actorType==="user")console.log("User request:",A.userId);else console.log("Unauthenticated request");let F={};if(w.headers.forEach((g,z)=>{F[z]=g}),console.log("Request details:",{method:w.method,url:w.url,headers:F,hasBody:w.body!==null}),w.body)try{let g=w.headers.get("Content-Type")||"";if(g.includes("application/json")){let z=await w.json();console.log("Request JSON body:",z)}else if(g.includes("text/")){let z=await w.text();console.log("Request text body:",z)}else console.log("Request has body with content-type:",g)}catch(g){console.log("Could not parse request body:",g)}try{console.log("Testing database connection...");let g=await B.query("SELECT NOW() as current_time, current_database() as database_name");console.log("Database query result:",g);try{let z=await B.query("SELECT COUNT(*) as demo_entity_count FROM demo_entities");console.log("Demo entities table query result:",z)}catch(z){console.log("Demo entities table not found or not accessible:",z)}}catch(g){console.log("Database query failed:",g)}return new Response(JSON.stringify({message:"Hello, world (from demo API request worker)!",timestamp:new Date().toISOString(),databaseTest:"Database client is available and working"}),{status:200})};export{I as handleRequest};

//# debugId=2D77AE09ACC53FD264756E2164756E21
